<h1>Create new listening</h1>

<div ng-if="!isAdmin">
    <p>Permission denied.</p>
</div>

<div ng-if="isAdmin">

    <div class="form-group">
        <label>Listening name</label>
        <input type="text" class="form-control" ng-model="listening.name">
    </div>

    <div class="form-group">
        <form ng-submit="listening.questions.push(question);question=''" class="row">

            <div class="col-md-12">
                <label>Question</label>
            </div>

            <div class="col-md-8">
                <textarea class="form-control" ng-model="question"></textarea>
            </div>

            <div class="col-md-4">
                <button class="btn btn-success pull-right">Add Question</button>
            </div>

        </form>
    </div>

    <div class="form-group">
        <form ng-submit="listening.taggables.push(taggable);taggable=''" class="row">

            <div class="col-md-12">
                <label>Taggable item</label>
            </div>

            <div class="col-md-8">
                <input type="text" class="form-control" ng-model="taggable">
            </div>

            <div class="col-md-4">
                <button class="btn btn-success pull-right">Add Taggable Item</button>
            </div>

        </form>
    </div>

    <hr>

    <h2 ng-if="listening.name">{{ listening.name }}</h2>

    <h3 ng-if="listening.questions.length">Questions</h3>

    <div ng-repeat="question in listening.questions" class="row">
        <div class="col-md-8">
            <p>{{ question }}</p>
        </div>
        <div class="col-md-4">
            <p class="pull-right"><button class="btn btn-danger" ng-click="removeQuestion(question)">Delete</button></p>
        </div>
    </div>

    <h3 ng-if="listening.taggables.length">Taggables</h3>
    <div ng-repeat="taggable in listening.taggables" class="row">
        <div class="col-md-8">
            <p>{{ taggable }}</p>
        </div>
        <div class="col-md-4">
            <p class="pull-right"><button class="btn btn-danger" ng-click="removeTaggable(taggable)">Delete</button></p>
        </div>
    </div>

    <div class="form-group"  ng-if="listening.name">
        <button class="btn btn-success btn-block" ng-click="saveListening(listening)">Save listening</button>
    </div>

</div>
